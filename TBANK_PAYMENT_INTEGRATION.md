# –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –æ–ø–ª–∞—Ç—ã T-Bank (–°–ë–ü) –¥–ª—è Telegram-–±–æ—Ç–∞

## –û–±–∑–æ—Ä

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é –ø–ª–∞—Ç—ë–∂–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã T-Bank —á–µ—Ä–µ–∑ –°–ë–ü (–°–∏—Å—Ç–µ–º—É –ë—ã—Å—Ç—Ä—ã—Ö –ü–ª–∞—Ç–µ–∂–µ–π) –≤ Telegram-–±–æ—Ç –¥–ª—è –ø—Ä–æ–¥–∞–∂–∏ VIP-–∫–ª—é—á–µ–π.

## –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

1. **–ê–∫–∫–∞—É–Ω—Ç T-Bank –¥–ª—è –±–∏–∑–Ω–µ—Å–∞**
   - –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ [business.tbank.ru](https://business.tbank.ru)
   - –ü–æ–¥–∫–ª—é—á–∏—Ç–µ —ç–∫–≤–∞–π—Ä–∏–Ω–≥ (–ø—Ä–∏—ë–º –ø–ª–∞—Ç–µ–∂–µ–π)

2. **API —É—á—ë—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**
   - Terminal Key (TerminalKey) ‚Äî –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Ç–µ—Ä–º–∏–Ω–∞–ª–∞
   - Password ‚Äî —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –ø–∞—Ä–æ–ª—å –¥–ª—è –ø–æ–¥–ø–∏—Å–∏ –∑–∞–ø—Ä–æ—Å–æ–≤

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–Ω–µ–ª–∏

### –®–∞–≥ 1: –û—Ç–∫—Ä—ã—Ç–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –±–æ—Ç–∞

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤–æ –≤–∫–ª–∞–¥–∫—É **"–ú–æ–∏ –±–æ—Ç—ã"**
2. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É **"–ù–∞—Å—Ç—Ä–æ–π–∫–∏"** –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–µ –Ω—É–∂–Ω–æ–≥–æ –±–æ—Ç–∞
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É **"–û–ø–ª–∞—Ç–∞"**

### –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –æ–ø–ª–∞—Ç—ã

–ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –ø–æ–ª—è:

- **–¶–µ–Ω–∞ VIP-–∫–ª—é—á–∞ (‚ÇΩ)**: –£–∫–∞–∂–∏—Ç–µ —Å—Ç–æ–∏–º–æ—Å—Ç—å –≤ —Ä—É–±–ª—è—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, 500)
- **T-Bank Terminal Key**: –í–≤–µ–¥–∏—Ç–µ –≤–∞—à `TerminalKey` –∏–∑ –ª–∏—á–Ω–æ–≥–æ –∫–∞–±–∏–Ω–µ—Ç–∞ T-Bank
- **T-Bank Password**: –í–≤–µ–¥–∏—Ç–µ —Å–µ–∫—Ä–µ—Ç–Ω—ã–π `Password` –¥–ª—è –ø–æ–¥–ø–∏—Å–∏ –∑–∞–ø—Ä–æ—Å–æ–≤

### –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–µ–∫—Å—Ç–æ–≤ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–ù–∞ –≤–∫–ª–∞–¥–∫–µ **"–¢–µ–∫—Å—Ç—ã"** –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å:
- –¢–µ–∫—Å—Ç—ã –∫–Ω–æ–ø–æ–∫ –º–µ–Ω—é
- –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
- –°–æ–æ–±—â–µ–Ω–∏–µ –ø—Ä–∏ –≤—ã–¥–∞—á–µ –±–µ—Å–ø–ª–∞—Ç–Ω–æ–≥–æ –∫–ª—é—á–∞
- –°–æ–æ–±—â–µ–Ω–∏–µ –ø—Ä–∏ –ø–æ–∫—É–ø–∫–µ VIP-–∫–ª—é—á–∞

## API T-Bank

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **–¢–µ—Å—Ç–æ–≤–∞—è –æ–ø–ª–∞—Ç–∞ —á–µ—Ä–µ–∑ –°–ë–ü**: [https://developer.tbank.ru/eacq/api/sbp-pay-test](https://developer.tbank.ru/eacq/api/sbp-pay-test)
- **–§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ QR-–∫–æ–¥–∞**: [https://developer.tbank.ru/eacq/api/get-qr](https://developer.tbank.ru/eacq/api/get-qr)

### –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã API

#### 1. –°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞ (Init)

```
POST https://securepay.tinkoff.ru/v2/Init
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
```json
{
  "TerminalKey": "–≤–∞—à_terminal_key",
  "Amount": 50000,  // —Å—É–º–º–∞ –≤ –∫–æ–ø–µ–π–∫–∞—Ö (500 —Ä—É–± = 50000 –∫–æ–ø–µ–µ–∫)
  "OrderId": "ORDER_12345",
  "Description": "–û–ø–ª–∞—Ç–∞ VIP-–∫–ª—é—á–∞",
  "Token": "–ø–æ–¥–ø–∏—Å—å_–∑–∞–ø—Ä–æ—Å–∞"
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "Success": true,
  "ErrorCode": "0",
  "TerminalKey": "–≤–∞—à_terminal_key",
  "Status": "NEW",
  "PaymentId": "123456789",
  "OrderId": "ORDER_12345",
  "Amount": 50000,
  "PaymentURL": "https://securepay.tinkoff.ru/..."
}
```

#### 2. –ü–æ–ª—É—á–µ–Ω–∏–µ QR-–∫–æ–¥–∞ –°–ë–ü (GetQr)

```
POST https://securepay.tinkoff.ru/v2/GetQr
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
```json
{
  "TerminalKey": "–≤–∞—à_terminal_key",
  "PaymentId": "123456789",
  "DataType": "PAYLOAD",
  "Token": "–ø–æ–¥–ø–∏—Å—å_–∑–∞–ø—Ä–æ—Å–∞"
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "Success": true,
  "ErrorCode": "0",
  "Data": "https://qr.nspk.ru/...",  // —Å—Å—ã–ª–∫–∞ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ QR
  "PaymentId": "123456789"
}
```

#### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –ø–ª–∞—Ç–µ–∂–∞ (GetState)

```
POST https://securepay.tinkoff.ru/v2/GetState
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
```json
{
  "TerminalKey": "–≤–∞—à_terminal_key",
  "PaymentId": "123456789",
  "Token": "–ø–æ–¥–ø–∏—Å—å_–∑–∞–ø—Ä–æ—Å–∞"
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "Success": true,
  "ErrorCode": "0",
  "Status": "CONFIRMED",  // –∏–ª–∏ NEW, AUTHORIZED, REJECTED, etc.
  "PaymentId": "123456789",
  "OrderId": "ORDER_12345"
}
```

### –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∏ (Token)

–ü–æ–¥–ø–∏—Å—å —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –ø–æ —Å–ª–µ–¥—É—é—â–µ–º—É –∞–ª–≥–æ—Ä–∏—Ç–º—É:

1. –°–æ–±–µ—Ä–∏—Ç–µ –≤—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞ (–∫—Ä–æ–º–µ `Token`) + `Password`
2. –û—Ç—Å–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –ø–æ –∫–ª—é—á–∞–º –≤ –∞–ª—Ñ–∞–≤–∏—Ç–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ
3. –°–∫–ª–µ–π—Ç–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤ –æ–¥–Ω—É —Å—Ç—Ä–æ–∫—É
4. –í—ã—á–∏—Å–ª–∏—Ç–µ SHA-256 —Ö—ç—à

**–ü—Ä–∏–º–µ—Ä (Python):**
```python
import hashlib

def generate_token(params: dict, password: str) -> str:
    # –î–æ–±–∞–≤–ª—è–µ–º –ø–∞—Ä–æ–ª—å
    params_with_password = {**params, 'Password': password}
    
    # –°–æ—Ä—Ç–∏—Ä—É–µ–º –ø–æ –∫–ª—é—á–∞–º
    sorted_keys = sorted(params_with_password.keys())
    
    # –°–∫–ª–µ–∏–≤–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏—è
    values = [str(params_with_password[key]) for key in sorted_keys]
    concatenated = ''.join(values)
    
    # –í—ã—á–∏—Å–ª—è–µ–º SHA-256
    token = hashlib.sha256(concatenated.encode()).hexdigest()
    return token

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
params = {
    'TerminalKey': 'YOUR_TERMINAL_KEY',
    'Amount': 50000,
    'OrderId': 'ORDER_12345',
    'Description': '–û–ø–ª–∞—Ç–∞ VIP-–∫–ª—é—á–∞'
}
token = generate_token(params, 'YOUR_PASSWORD')
```

## –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã –≤ –±–æ—Ç–µ

### –°—Ü–µ–Ω–∞—Ä–∏–π –ø–æ–∫—É–ø–∫–∏ VIP-–∫–ª—é—á–∞

1. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç –∫–Ω–æ–ø–∫—É "üíé –ö—É–ø–∏—Ç—å VIP-–∫–ª—é—á"**
   
2. **–ë–æ—Ç —Å–æ–∑–¥–∞—ë—Ç –ø–ª–∞—Ç—ë–∂ —á–µ—Ä–µ–∑ T-Bank API**
   ```python
   payment = create_payment(
       terminal_key=bot_config['tbank_terminal_key'],
       password=bot_config['tbank_password'],
       amount=bot_config['vip_price'] * 100,  # —Ä—É–±–ª–∏ ‚Üí –∫–æ–ø–µ–π–∫–∏
       order_id=f"VIP_{bot_id}_{user_id}_{timestamp}",
       description=f"VIP-–∫–ª—é—á –¥–ª—è –±–æ—Ç–∞ {bot_name}"
   )
   ```

3. **–ë–æ—Ç –ø–æ–ª—É—á–∞–µ—Ç QR-–∫–æ–¥ –¥–ª—è –æ–ø–ª–∞—Ç—ã**
   ```python
   qr_data = get_qr_code(
       terminal_key=bot_config['tbank_terminal_key'],
       password=bot_config['tbank_password'],
       payment_id=payment['PaymentId']
   )
   ```

4. **–ë–æ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç QR-–∫–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é**
   - –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ QR-–∫–æ–¥–∞ –∏–∑ `qr_data['Data']`
   - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–µ–π –ø–æ –æ–ø–ª–∞—Ç–µ
   - –°–æ—Ö—Ä–∞–Ω—è–µ—Ç `PaymentId` –≤ –ë–î –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è

5. **Webhook –æ—Ç T-Bank (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)**
   - –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –æ–ø–ª–∞—Ç—ã T-Bank –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç webhook
   - –ë–æ—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–æ–¥–ø–∏—Å—å webhook
   - –í—ã–¥–∞—ë—Ç VIP QR-–∫–ª—é—á –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

6. **–ò–ª–∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ webhook)**
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç –∫–Ω–æ–ø–∫—É "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–ø–ª–∞—Ç—É"
   - –ë–æ—Ç –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç —Å—Ç–∞—Ç—É—Å —á–µ—Ä–µ–∑ `GetState`
   - –ï—Å–ª–∏ —Å—Ç–∞—Ç—É—Å `CONFIRMED` ‚Äî –≤—ã–¥–∞—ë—Ç VIP-–∫–ª—é—á

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –¢–µ—Å—Ç–æ–≤–∞—è —Å—Ä–µ–¥–∞ T-Bank

1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π `TerminalKey` –∏ `Password`
2. –û—Ç–ø—Ä–∞–≤–ª—è–π—Ç–µ –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ —Ç–µ—Å—Ç–æ–≤—ã–π URL (–µ—Å–ª–∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω)
3. –î–ª—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –ø–ª–∞—Ç–µ–∂–µ–π –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å—É–º–º—ã:
   - `100` –∫–æ–ø–µ–µ–∫ ‚Äî —É—Å–ø–µ—à–Ω–∞—è –æ–ø–ª–∞—Ç–∞
   - `200` –∫–æ–ø–µ–µ–∫ ‚Äî –æ—Ç–∫–ª–æ–Ω—ë–Ω–Ω–∞—è –æ–ø–ª–∞—Ç–∞
   - –∏ —Ç.–¥. (—Å–º. –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é T-Bank)

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

1. –°–æ–∑–¥–∞–π—Ç–µ –±–æ—Ç–∞ —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ T-Bank
2. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "–ö—É–ø–∏—Ç—å VIP-–∫–ª—é—á" –≤ –±–æ—Ç–µ
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ:
   - –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è QR-–∫–æ–¥
   - –ú–æ–∂–Ω–æ –æ—Ç—Å–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å QR —á–µ—Ä–µ–∑ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±–∞–Ω–∫–∞
   - –ü–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã –≤—ã–¥–∞—ë—Ç—Å—è VIP-–∫–ª—é—á
   - –î–∞–Ω–Ω—ã–µ –æ –ø–ª–∞—Ç–µ–∂–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –ë–î

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

‚ö†Ô∏è **–í–ê–ñ–ù–û:**

1. **–ù–∏–∫–æ–≥–¥–∞ –Ω–µ –ø–µ—Ä–µ–¥–∞–≤–∞–π—Ç–µ `Password` –≤ –æ—Ç–∫—Ä—ã—Ç–æ–º –≤–∏–¥–µ**
   - –ü–∞—Ä–æ–ª—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ–¥–ø–∏—Å–∏
   - –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–π—Ç–µ –µ–≥–æ –≤ —Ç–µ–ª–µ –∑–∞–ø—Ä–æ—Å–∞ (–∫—Ä–æ–º–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ Token)

2. **–•—Ä–∞–Ω–∏—Ç–µ —É—á—ë—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ –∑–∞—â–∏—â—ë–Ω–Ω–æ–º —Ö—Ä–∞–Ω–∏–ª–∏—â–µ**
   - –í –ë–î —Ö—Ä–∞–Ω—è—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –±—ç–∫–µ–Ω–¥–æ–º
   - –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –æ—Ç–¥–∞–≤–∞–π—Ç–µ –∏—Ö –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥

3. **–ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ø–æ–¥–ø–∏—Å–∏ –≤—Ö–æ–¥—è—â–∏—Ö webhook**
   - T-Bank –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ–¥–ø–∏—Å—å –≤–º–µ—Å—Ç–µ —Å –¥–∞–Ω–Ω—ã–º–∏
   - –í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ø–æ–¥–ø–∏—Å—å –ø–µ—Ä–µ–¥ –æ–±—Ä–∞–±–æ—Ç–∫–æ–π

4. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ HTTPS –¥–ª—è –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤**
   - T-Bank API —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ HTTPS
   - Webhook endpoint —Ç–∞–∫–∂–µ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å HTTPS

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ë–î

### –¢–∞–±–ª–∏—Ü–∞ `bots`

–ù–æ–≤—ã–µ –ø–æ–ª—è –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ –æ–ø–ª–∞—Ç—ã:

```sql
ALTER TABLE t_p5255237_telegram_bot_service.bots 
ADD COLUMN button_texts JSONB,           -- —Ç–µ–∫—Å—Ç—ã –∫–Ω–æ–ø–æ–∫ –º–µ–Ω—é
ADD COLUMN message_texts JSONB,          -- —Ç–µ–∫—Å—Ç—ã —Å–æ–æ–±—â–µ–Ω–∏–π –±–æ—Ç–∞
ADD COLUMN tbank_terminal_key VARCHAR(255),  -- T-Bank Terminal Key
ADD COLUMN tbank_password VARCHAR(255),      -- T-Bank Password
ADD COLUMN vip_price INTEGER DEFAULT 500;   -- —Ü–µ–Ω–∞ VIP-–∫–ª—é—á–∞ –≤ —Ä—É–±–ª—è—Ö
```

### –¢–∞–±–ª–∏—Ü–∞ `payments` (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Å–æ–∑–¥–∞—Ç—å)

```sql
CREATE TABLE t_p5255237_telegram_bot_service.payments (
  id SERIAL PRIMARY KEY,
  bot_id INTEGER NOT NULL REFERENCES t_p5255237_telegram_bot_service.bots(id),
  user_id INTEGER NOT NULL,  -- telegram user id
  payment_id VARCHAR(255) NOT NULL,  -- T-Bank PaymentId
  order_id VARCHAR(255) NOT NULL UNIQUE,
  amount INTEGER NOT NULL,  -- —Å—É–º–º–∞ –≤ –∫–æ–ø–µ–π–∫–∞—Ö
  status VARCHAR(50) NOT NULL,  -- NEW, CONFIRMED, REJECTED, etc.
  qr_code_id INTEGER REFERENCES t_p5255237_telegram_bot_service.qr_codes(id),
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  paid_at TIMESTAMP,
  FOREIGN KEY (bot_id) REFERENCES t_p5255237_telegram_bot_service.bots(id)
);
```

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Ñ—É–Ω–∫—Ü–∏–∏ `telegram-bot-engine`**
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∑–∞–ø—Ä–æ—Å—ã –∫ T-Bank API –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç –ø–æ–¥–ø–∏—Å–∏

2. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è T-Bank**
   - [https://developer.tbank.ru](https://developer.tbank.ru)

3. **–°–ª—É–∂–±–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ T-Bank**
   - –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É –¥–ª—è –±–∏–∑–Ω–µ—Å–∞ –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å API

## –ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞

### –°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞ (Python)

```python
import hashlib
import requests
import json

def create_payment(terminal_key: str, password: str, amount: int, order_id: str, description: str):
    url = 'https://securepay.tinkoff.ru/v2/Init'
    
    params = {
        'TerminalKey': terminal_key,
        'Amount': amount,
        'OrderId': order_id,
        'Description': description
    }
    
    # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –ø–æ–¥–ø–∏—Å—å
    token = generate_token(params, password)
    params['Token'] = token
    
    response = requests.post(url, json=params)
    return response.json()
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ QR-–∫–æ–¥–∞ (Python)

```python
def get_qr_code(terminal_key: str, password: str, payment_id: str):
    url = 'https://securepay.tinkoff.ru/v2/GetQr'
    
    params = {
        'TerminalKey': terminal_key,
        'PaymentId': payment_id,
        'DataType': 'PAYLOAD'
    }
    
    token = generate_token(params, password)
    params['Token'] = token
    
    response = requests.post(url, json=params)
    return response.json()
```

## –ò—Ç–æ–≥

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å T-Bank:

‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–º–æ–≥—É—Ç –ø–æ–∫—É–ø–∞—Ç—å VIP-–∫–ª—é—á–∏ —á–µ—Ä–µ–∑ –°–ë–ü  
‚úÖ –û–ø–ª–∞—Ç–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä—è–º–æ –≤ Telegram (—á–µ—Ä–µ–∑ QR-–∫–æ–¥)  
‚úÖ –í—Å–µ —Ç–µ–∫—Å—Ç—ã –±–æ—Ç–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä—É—é—Ç—Å—è —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å  
‚úÖ –ò—Å—Ç–æ—Ä–∏—è –ø–ª–∞—Ç–µ–∂–µ–π —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –ë–î  
‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≤—ã–¥–∞—á–∞ VIP-–∫–ª—é—á–µ–π –ø–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã
