<!DOCTYPE html>
<html>
<head>
    <title>–ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram –±–æ—Ç–∞ - –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä QR + Vip</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 900px;
            margin: 50px auto;
            padding: 20px;
            background: #0f0f0f;
            color: #fff;
        }
        .card {
            background: #1a1a1a;
            border: 1px solid #333;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
        }
        button {
            background: linear-gradient(135deg, #8b5cf6 0%, #ec4899 100%);
            color: white;
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            margin: 5px;
            font-size: 14px;
            font-weight: 600;
        }
        button:hover {
            opacity: 0.9;
        }
        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        .result {
            background: #111;
            padding: 15px;
            border-radius: 5px;
            margin-top: 20px;
            white-space: pre-wrap;
            font-family: monospace;
            font-size: 12px;
            border: 1px solid #333;
        }
        .success {
            color: #10b981;
        }
        .error {
            color: #ef4444;
        }
        .info {
            color: #3b82f6;
        }
        h1 {
            font-size: 28px;
            margin-bottom: 10px;
        }
        h2 {
            font-size: 20px;
            margin-top: 30px;
            margin-bottom: 15px;
            color: #8b5cf6;
        }
        .status {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            margin-left: 10px;
        }
        .status-active {
            background: #10b981;
            color: white;
        }
        .step {
            margin-bottom: 15px;
            padding: 10px;
            background: #111;
            border-left: 3px solid #8b5cf6;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <h1>ü§ñ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram –±–æ—Ç–∞</h1>
    
    <div class="card">
        <h2>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –±–æ—Ç–µ</h2>
        <p><strong>–ù–∞–∑–≤–∞–Ω–∏–µ:</strong> –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä QR + Vip</p>
        <p><strong>ID:</strong> 11</p>
        <p><strong>–°—Ç–∞—Ç—É—Å:</strong> <span class="status status-active">ACTIVE</span></p>
        <p><strong>Token:</strong> 8553536650:AAHn7AF0q_ApNtJlh7zSiMVEj2L_0RNHJlY</p>
    </div>

    <div class="card">
        <h2>–®–∞–≥ 1: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Webhook</h2>
        <p>Webhook URL: <code>https://functions.poehali.dev/e8eb375e-9ff3-4b43-9b51-12ac8338c9fe?token=8553536650:AAHn7AF0q_ApNtJlh7zSiMVEj2L_0RNHJlY</code></p>
        
        <div class="step">
            <button onclick="setupWebhook()">‚úÖ –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Webhook</button>
            <button onclick="checkWebhook()">‚ÑπÔ∏è –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å</button>
            <button onclick="deleteWebhook()">‚ùå –£–¥–∞–ª–∏—Ç—å Webhook</button>
        </div>
    </div>

    <div class="card">
        <h2>–®–∞–≥ 2: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è QR-–∫–æ–¥–æ–≤</h2>
        <p>–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ webhook –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å QR-–∫–æ–¥—ã –¥–ª—è –±–æ—Ç–∞</p>
        
        <div class="step">
            <button onclick="generateQRCodes()">üé´ –°–æ–∑–¥–∞—Ç—å QR-–∫–æ–¥—ã</button>
            <button onclick="checkQRCodes()">üìä –ü—Ä–æ–≤–µ—Ä–∏—Ç—å QR-–∫–æ–¥—ã</button>
        </div>
    </div>

    <div class="card">
        <h2>–®–∞–≥ 3: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ</h2>
        <p>–û—Ç–∫—Ä–æ–π—Ç–µ –±–æ—Ç–∞ –≤ Telegram –∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É <code>/start</code></p>
        
        <div class="step">
            <button onclick="testBot()">üß™ –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ</button>
            <a href="https://t.me/YourBotUsername" target="_blank" style="text-decoration: none;">
                <button>üì± –û—Ç–∫—Ä—ã—Ç—å –±–æ—Ç–∞ –≤ Telegram</button>
            </a>
        </div>
    </div>
    
    <div id="result" class="result" style="display:none;"></div>
    
    <script>
        const BOT_ID = 11;
        const BOT_TOKEN = '8553536650:AAHn7AF0q_ApNtJlh7zSiMVEj2L_0RNHJlY';
        const WEBHOOK_URL = 'https://functions.poehali.dev/e8eb375e-9ff3-4b43-9b51-12ac8338c9fe?token=' + BOT_TOKEN;
        
        async function setupWebhook() {
            showResult('‚è≥ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ webhook...', 'info');
            try {
                const response = await fetch('https://functions.poehali.dev/5de84ef3-0564-49a9-95a1-05f3de4ba313', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        bot_id: BOT_ID,
                        action: 'setup'
                    })
                });
                
                const data = await response.json();
                
                if (data.telegram_result?.ok) {
                    showResult('‚úÖ Webhook –Ω–∞—Å—Ç—Ä–æ–µ–Ω —É—Å–ø–µ—à–Ω–æ!\n\n' + JSON.stringify(data, null, 2), 'success');
                } else {
                    showResult('‚ùå –û—à–∏–±–∫–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ webhook:\n\n' + JSON.stringify(data, null, 2), 'error');
                }
            } catch (error) {
                showResult('‚ùå –û—à–∏–±–∫–∞: ' + error.message, 'error');
            }
        }
        
        async function checkWebhook() {
            showResult('‚è≥ –ü—Ä–æ–≤–µ—Ä–∫–∞ webhook...', 'info');
            try {
                const response = await fetch('https://functions.poehali.dev/5de84ef3-0564-49a9-95a1-05f3de4ba313', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        bot_id: BOT_ID,
                        action: 'info'
                    })
                });
                
                const data = await response.json();
                showResult('‚ÑπÔ∏è –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ webhook:\n\n' + JSON.stringify(data, null, 2), 'info');
            } catch (error) {
                showResult('‚ùå –û—à–∏–±–∫–∞: ' + error.message, 'error');
            }
        }
        
        async function deleteWebhook() {
            showResult('‚è≥ –£–¥–∞–ª–µ–Ω–∏–µ webhook...', 'info');
            try {
                const response = await fetch('https://functions.poehali.dev/5de84ef3-0564-49a9-95a1-05f3de4ba313', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        bot_id: BOT_ID,
                        action: 'delete'
                    })
                });
                
                const data = await response.json();
                showResult('‚úÖ Webhook —É–¥–∞–ª–µ–Ω:\n\n' + JSON.stringify(data, null, 2), 'success');
            } catch (error) {
                showResult('‚ùå –û—à–∏–±–∫–∞: ' + error.message, 'error');
            }
        }

        async function generateQRCodes() {
            showResult('‚è≥ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è QR-–∫–æ–¥–æ–≤...', 'info');
            try {
                const response = await fetch('https://functions.poehali.dev/11492c68-8058-4d7e-a8a8-f6f82614e69e', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        bot_id: BOT_ID
                    })
                });
                
                const data = await response.json();
                showResult('‚úÖ QR-–∫–æ–¥—ã —Å–æ–∑–¥–∞–Ω—ã:\n\n' + JSON.stringify(data, null, 2), 'success');
            } catch (error) {
                showResult('‚ùå –û—à–∏–±–∫–∞: ' + error.message, 'error');
            }
        }

        async function checkQRCodes() {
            showResult('‚è≥ –ü—Ä–æ–≤–µ—Ä–∫–∞ QR-–∫–æ–¥–æ–≤...', 'info');
            try {
                const response = await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        chat_id: 1234567890, // –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à chat_id
                        text: '–¢–µ—Å—Ç —Ä–∞–±–æ—Ç—ã –±–æ—Ç–∞!'
                    })
                });
                
                const data = await response.json();
                showResult('–†–µ–∑—É–ª—å—Ç–∞—Ç:\n\n' + JSON.stringify(data, null, 2), 'info');
            } catch (error) {
                showResult('‚ùå –û—à–∏–±–∫–∞: ' + error.message, 'error');
            }
        }

        async function testBot() {
            showResult('‚è≥ –û—Ç–ø—Ä–∞–≤–∫–∞ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è...', 'info');
            alert('–î–ª—è —Ç–µ—Å—Ç–∞ –æ—Ç–∫—Ä–æ–π—Ç–µ –±–æ—Ç–∞ –≤ Telegram –∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É /start');
        }
        
        function showResult(text, type = 'info') {
            const resultDiv = document.getElementById('result');
            resultDiv.textContent = text;
            resultDiv.className = 'result ' + type;
            resultDiv.style.display = 'block';
        }
    </script>
</body>
</html>
