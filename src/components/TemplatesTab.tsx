import { useState } from 'react';
import { Card } from '@/components/ui/card';
import { Badge } from '@/components/ui/badge';
import Icon from '@/components/ui/icon';
import { Button } from '@/components/ui/button';
import GptBotConfigDialog, { GptBotConfig } from '@/components/GptBotConfigDialog';
import { useToast } from '@/hooks/use-toast';

interface Template {
  id: string;
  name: string;
  description: string;
  icon: string;
  features: string[];
  logic: string;
  gradient: string;
  popular?: boolean;
  status?: 'ready' | 'development';
}

const templates: Template[] = [
  {
    id: 'keys',
    name: 'QR-–∫–ª—é—á–∏',
    description: '–ë–æ—Ç –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö QR-–∫–æ–¥–æ–≤ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –ø–ª–∞—Ç–Ω–æ–π –∏ –±–µ—Å–ø–ª–∞—Ç–Ω–æ–π –≤—ã–¥–∞—á–∏',
    icon: 'Key',
    gradient: 'gradient-purple',
    popular: true,
    status: 'ready',
    features: [
      '–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö QR-–∫–æ–¥–æ–≤',
      '–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –∏ –ø–ª–∞—Ç–Ω—ã–µ –∫–ª—é—á–∏',
      '–†–æ—Ç–∞—Ü–∏—è QR-–∫–æ–¥–æ–≤ –ø–æ –≤—Ä–µ–º–µ–Ω–∏',
      '–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å T-Bank',
      '–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤—ã–¥–∞—á–∏ –∫–ª—é—á–µ–π',
      '–°–æ–≥–ª–∞—Å–∏–µ –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É –¥–∞–Ω–Ω—ã—Ö'
    ],
    logic: `
üìã –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã:

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–ø—É—Å–∫–∞–µ—Ç –±–æ—Ç–∞ /start
2. –ë–æ—Ç –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –º–µ–Ω—é —Å –∫–Ω–æ–ø–∫–∞–º–∏
3. –ü—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ –±–µ—Å–ø–ª–∞—Ç–Ω–æ–≥–æ –∫–ª—é—á–∞:
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –æ—Å—Ç–∞—Ç–æ–∫ –±–µ—Å–ø–ª–∞—Ç–Ω—ã—Ö –∫–ª—é—á–µ–π
   - –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–π QR-–∫–æ–¥
   - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
   - –£–º–µ–Ω—å—à–∞–µ—Ç —Å—á–µ—Ç—á–∏–∫ –±–µ—Å–ø–ª–∞—Ç–Ω—ã—Ö –∫–ª—é—á–µ–π
4. –ü—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ –ø–ª–∞—Ç–Ω–æ–≥–æ –∫–ª—é—á–∞:
   - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ—Ñ—Ñ–µ—Ä —Å —Ü–µ–Ω–æ–π
   - –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø–ª–∞—Ç—ë–∂ –≤ T-Bank
   - –ü–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã –≤—ã–¥–∞–µ—Ç VIP QR-–∫–æ–¥
   - –£–º–µ–Ω—å—à–∞–µ—Ç —Å—á–µ—Ç—á–∏–∫ –ø–ª–∞—Ç–Ω—ã—Ö –∫–ª—é—á–µ–π
5. QR-–∫–æ–¥—ã —Ä–æ—Ç–∏—Ä—É—é—Ç—Å—è –ø–æ –∑–∞–¥–∞–Ω–Ω–æ–º—É –∏–Ω—Ç–µ—Ä–≤–∞–ª—É

üí° –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ: –ó–∞–∫—Ä—ã—Ç—ã–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è, –ø–ª–∞—Ç–Ω—ã–π –¥–æ—Å—Ç—É–ø, –∏–≤–µ–Ω—Ç—ã, –∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏–∏
    `
  },
  {
    id: 'gpt',
    name: 'GPT Bot',
    description: '–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π –±–æ—Ç –Ω–∞ –±–∞–∑–µ ChatGPT –∏–ª–∏ YandexGPT –¥–ª—è –æ–±—â–µ–Ω–∏—è —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏',
    icon: 'Brain',
    gradient: 'gradient-blue',
    popular: true,
    status: 'development',
    features: [
      'ChatGPT 3.5/4 –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è',
      'YandexGPT –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è',
      '–ë–µ—Å–ø–ª–∞—Ç–Ω–æ–µ –ø—Ä–æ–∫—Å–∏ –¥–ª—è ChatGPT',
      '–ö–æ–Ω—Ç–µ–∫—Å—Ç –¥–∏–∞–ª–æ–≥–∞',
      '–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–º–ø—Ç–∞',
      '–õ–∏–º–∏—Ç—ã —Å–æ–æ–±—â–µ–Ω–∏–π',
      '–ò—Å—Ç–æ—Ä–∏—è –ø–µ—Ä–µ–ø–∏—Å–∫–∏'
    ],
    logic: `
üìã –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã:

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–ø—É—Å–∫–∞–µ—Ç –±–æ—Ç–∞ /start
2. –ë–æ—Ç –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –∏ –≥–æ—Ç–æ–≤ –∫ –æ–±—â–µ–Ω–∏—é
3. –ö–∞–∂–¥–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
   - –°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç –¥–∏–∞–ª–æ–≥–∞
   - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ ChatGPT/YandexGPT API
   - –ë–æ—Ç –ø–æ–ª—É—á–∞–µ—Ç –æ—Ç–≤–µ—Ç AI
   - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—Ç–≤–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
4. –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–æ–º–∞–Ω–¥:
   - /start - –Ω–∞—á–∞—Ç—å –¥–∏–∞–ª–æ–≥
   - /reset - –æ—á–∏—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç
   - /help - –ø–æ–º–æ—â—å
5. –£—á–µ—Ç –ª–∏–º–∏—Ç–æ–≤ —Å–æ–æ–±—â–µ–Ω–∏–π
6. –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –ø—Ä–æ–∫—Å–∏ –¥–ª—è ChatGPT

üîë –ù–∞—Å—Ç—Ä–æ–π–∫–∏:
- OpenAI API Key (–¥–ª—è ChatGPT)
- YandexGPT API Key (–¥–ª—è YandexGPT)
- –°–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç (—Ä–æ–ª—å –±–æ—Ç–∞)
- –ú–æ–¥–µ–ª—å: gpt-3.5-turbo / gpt-4 / yandexgpt
- –ü—Ä–æ–∫—Å–∏: –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –∏–ª–∏ —Å–≤–æ–π URL
- –õ–∏–º–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –¥–µ–Ω—å

üí° –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–ª–∏–µ–Ω—Ç–æ–≤, –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏, –æ–±—É—á–µ–Ω–∏–µ, —Ä–∞–∑–≤–ª–µ—á–µ–Ω–∏—è
    `
  },
  {
    id: 'support',
    name: '–ü–æ–¥–¥–µ—Ä–∂–∫–∞',
    description: '–ë–æ—Ç –¥–ª—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —Å —Ç–∏–∫–µ—Ç-—Å–∏—Å—Ç–µ–º–æ–π –∏ –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑—å—é',
    icon: 'Headphones',
    gradient: 'gradient-orange',
    status: 'development',
    features: [
      '–°–æ–∑–¥–∞–Ω–∏–µ —Ç–∏–∫–µ—Ç–æ–≤',
      '–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É',
      'FAQ —Å–µ–∫—Ü–∏—è',
      '–û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å',
      '–°—Ç–∞—Ç—É—Å—ã –æ–±—Ä–∞—â–µ–Ω–∏–π',
      '–ò—Å—Ç–æ—Ä–∏—è –¥–∏–∞–ª–æ–≥–æ–≤'
    ],
    logic: `
üìã –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã:

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–ø—É—Å–∫–∞–µ—Ç –±–æ—Ç–∞ /start
2. –ú–µ–Ω—é —Å —Ä–∞–∑–¥–µ–ª–∞–º–∏:
   - ‚ùì FAQ (—á–∞—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã)
   - üìù –°–æ–∑–¥–∞—Ç—å –æ–±—Ä–∞—â–µ–Ω–∏–µ
   - üìä –ú–æ–∏ –æ–±—Ä–∞—â–µ–Ω–∏—è
3. –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –æ–±—Ä–∞—â–µ–Ω–∏—è:
   - –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –∫–∞—Ç–µ–≥–æ—Ä–∏—é –ø—Ä–æ–±–ª–µ–º—ã
   - –ü–æ–ª—É—á–∞–µ—Ç –æ–ø–∏—Å–∞–Ω–∏–µ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - –°–æ–∑–¥–∞–µ—Ç —Ç–∏–∫–µ—Ç –≤ –±–∞–∑–µ
   - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º
4. –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –º–æ–∂–µ—Ç:
   - –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –≤—Å–µ –æ–±—Ä–∞—â–µ–Ω–∏—è
   - –û—Ç–≤–µ—á–∞—Ç—å –Ω–∞ —Ç–∏–∫–µ—Ç—ã
   - –ú–µ–Ω—è—Ç—å —Å—Ç–∞—Ç—É—Å (–æ—Ç–∫—Ä—ã—Ç/–≤ —Ä–∞–±–æ—Ç–µ/—Ä–µ—à–µ–Ω)
5. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –æ—Ç–≤–µ—Ç–∞—Ö

üí° –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–ª–∏–µ–Ω—Ç–æ–≤, —Å–µ—Ä–≤–∏—Å–Ω—ã–µ –∫–æ–º–ø–∞–Ω–∏–∏, –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω—ã
    `
  },
  {
    id: 'shop',
    name: '–ú–∞–≥–∞–∑–∏–Ω',
    description: '–ë–æ—Ç-–º–∞–≥–∞–∑–∏–Ω —Å –∫–∞—Ç–∞–ª–æ–≥–æ–º —Ç–æ–≤–∞—Ä–æ–≤, –∫–æ—Ä–∑–∏–Ω–æ–π –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π –æ–ø–ª–∞—Ç—ã',
    icon: 'ShoppingCart',
    gradient: 'gradient-purple',
    status: 'ready',
    features: [
      '–ö–∞—Ç–∞–ª–æ–≥ —Ç–æ–≤–∞—Ä–æ–≤ —Å –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏',
      '–ö–æ—Ä–∑–∏–Ω–∞ –ø–æ–∫—É–ø–æ–∫',
      '–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞',
      '–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å T-Bank',
      '–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –∑–∞–∫–∞–∑–∞—Ö',
      '–ò—Å—Ç–æ—Ä–∏—è –ø–æ–∫—É–ø–æ–∫'
    ],
    logic: `
üìã –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã:

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–ø—É—Å–∫–∞–µ—Ç –±–æ—Ç–∞ /start
2. –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é:
   - üõç –ö–∞—Ç–∞–ª–æ–≥ —Ç–æ–≤–∞—Ä–æ–≤
   - üõí –ö–æ—Ä–∑–∏–Ω–∞
   - üì¶ –ú–æ–∏ –∑–∞–∫–∞–∑—ã
3. –í –∫–∞—Ç–∞–ª–æ–≥–µ:
   - –í—ã–±–æ—Ä –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ç–æ–≤–∞—Ä–æ–≤
   - –ü—Ä–æ—Å–º–æ—Ç—Ä —Ç–æ–≤–∞—Ä–∞ —Å —Ñ–æ—Ç–æ, –æ–ø–∏—Å–∞–Ω–∏–µ–º, —Ü–µ–Ω–æ–π
   - –ö–Ω–æ–ø–∫–∞ "–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É"
4. –í –∫–æ—Ä–∑–∏–Ω–µ:
   - –°–ø–∏—Å–æ–∫ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤
   - –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞
   - –ò—Ç–æ–≥–æ–≤–∞—è —Å—É–º–º–∞
   - –ö–Ω–æ–ø–∫–∞ "–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑"
5. –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞:
   - –ó–∞–ø—Ä–æ—Å –¥–∞–Ω–Ω—ã—Ö –¥–æ—Å—Ç–∞–≤–∫–∏
   - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–ª–∞—Ç–µ–∂–∞ T-Bank
   - –ü–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã - –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞
   - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É

üí° –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ: –ò–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω—ã, –ø—Ä–æ–¥–∞–∂–∞ —É—Å–ª—É–≥, —Ü–∏—Ñ—Ä–æ–≤—ã–µ —Ç–æ–≤–∞—Ä—ã
    `
  },
  {
    id: 'booking',
    name: '–ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ',
    description: '–ë–æ—Ç –¥–ª—è –∑–∞–ø–∏—Å–∏ –Ω–∞ —É—Å–ª—É–≥–∏ —Å –∫–∞–ª–µ–Ω–¥–∞—Ä–µ–º –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º —Å–ª–æ—Ç–∞–º–∏',
    icon: 'Calendar',
    gradient: 'gradient-blue',
    status: 'development',
    features: [
      '–ö–∞–ª–µ–Ω–¥–∞—Ä—å —Å –¥–æ—Å—Ç—É–ø–Ω—ã–º–∏ —Å–ª–æ—Ç–∞–º–∏',
      '–ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏',
      '–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –∑–∞–ø–∏—Å–∏',
      '–û—Ç–º–µ–Ω–∞/–ø–µ—Ä–µ–Ω–æ—Å –∑–∞–ø–∏—Å–∏',
      '–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –ø–µ—Ä–µ–¥ –≤–∏–∑–∏—Ç–æ–º',
      '–ê–¥–º–∏–Ω–∫–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ–º'
    ],
    logic: `
üìã –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã:

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–ø—É—Å–∫–∞–µ—Ç –±–æ—Ç–∞ /start
2. –ú–µ–Ω—é —Å —É—Å–ª—É–≥–∞–º–∏/—Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞–º–∏
3. –í—ã–±–æ—Ä —É—Å–ª—É–≥–∏:
   - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–∞–ª–µ–Ω–¥–∞—Ä—å –Ω–∞ –º–µ—Å—è—Ü
   - –î–æ—Å—Ç—É–ø–Ω—ã–µ –¥–∞—Ç—ã –ø–æ–¥—Å–≤–µ—á–µ–Ω—ã
   - –ü—Ä–∏ –≤—ã–±–æ—Ä–µ –¥–∞—Ç—ã - —Å–ø–∏—Å–æ–∫ —Å–≤–æ–±–æ–¥–Ω—ã—Ö —á–∞—Å–æ–≤
4. –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ:
   - –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏
   - –ó–∞–ø—Ä–æ—Å –∫–æ–Ω—Ç–∞–∫—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
   - –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –≤ –±–∞–∑–µ
   - –û—Ç–ø—Ä–∞–≤–∫–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
5. –ó–∞ 24 —á–∞—Å–∞ –¥–æ –≤–∏–∑–∏—Ç–∞ - –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ
6. –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–º–µ–Ω–∏—Ç—å/–ø–µ—Ä–µ–Ω–µ—Å—Ç–∏

–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –º–æ–∂–µ—Ç:
- –£–ø—Ä–∞–≤–ª—è—Ç—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ–º
- –ë–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å —Å–ª–æ—Ç—ã
- –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –≤—Å–µ –∑–∞–ø–∏—Å–∏

üí° –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ: –°–∞–ª–æ–Ω—ã –∫—Ä–∞—Å–æ—Ç—ã, –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–µ —Ü–µ–Ω—Ç—Ä—ã, –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏, –º–∞—Å—Ç–µ—Ä–∞
    `
  },
  {
    id: 'quiz',
    name: '–í–∏–∫—Ç–æ—Ä–∏–Ω–∞',
    description: '–ë–æ—Ç —Å –∫–≤–∏–∑–∞–º–∏, –æ–ø—Ä–æ—Å–∞–º–∏ –∏ –∏–≥—Ä–∞–º–∏ –¥–ª—è –≤–æ–≤–ª–µ—á–µ–Ω–∏—è –∞—É–¥–∏—Ç–æ—Ä–∏–∏',
    icon: 'Trophy',
    gradient: 'gradient-orange',
    status: 'development',
    features: [
      '–°–æ–∑–¥–∞–Ω–∏–µ –≤–∏–∫—Ç–æ—Ä–∏–Ω —Å –≤–æ–ø—Ä–æ—Å–∞–º–∏',
      '–°–∏—Å—Ç–µ–º–∞ –±–∞–ª–ª–æ–≤ –∏ —Ä–µ–π—Ç–∏–Ω–≥',
      '–¢–∞–π–º–µ—Ä –Ω–∞ –æ—Ç–≤–µ—Ç—ã',
      '–ü—Ä–∏–∑—ã –∑–∞ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–µ',
      '–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤',
      '–≠–∫—Å–ø–æ—Ä—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤'
    ],
    logic: `
üìã –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã:

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–ø—É—Å–∫–∞–µ—Ç –±–æ—Ç–∞ /start
2. –ú–µ–Ω—é:
   - üéØ –ù–∞—á–∞—Ç—å –≤–∏–∫—Ç–æ—Ä–∏–Ω—É
   - üèÜ –†–µ–π—Ç–∏–Ω–≥ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
   - üìä –ú–æ–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
3. –ü—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–µ –≤–∏–∫—Ç–æ—Ä–∏–Ω—ã:
   - –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤–æ–ø—Ä–æ—Å—ã
   - –í–∞—Ä–∏–∞–Ω—Ç—ã –æ—Ç–≤–µ—Ç–æ–≤ (–∫–Ω–æ–ø–∫–∏)
   - –¢–∞–π–º–µ—Ä –Ω–∞ –∫–∞–∂–¥—ã–π –≤–æ–ø—Ä–æ—Å (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
   - –ü–æ–¥—Å—á–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤
4. –†–µ–∑—É–ª—å—Ç–∞—Ç:
   - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–∞–ª–ª–æ–≤
   - –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ/–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã
   - –ú–µ—Å—Ç–æ –≤ —Ä–µ–π—Ç–∏–Ω–≥–µ
   - –ü—Ä–∏–∑–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ)
5. –†–µ–π—Ç–∏–Ω–≥ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –º–æ–∂–µ—Ç:
- –°–æ–∑–¥–∞–≤–∞—Ç—å/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –≤–æ–ø—Ä–æ—Å—ã
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –±–∞–ª–ª—ã –∑–∞ –æ—Ç–≤–µ—Ç—ã
- –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É

üí° –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ: –ú–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤—ã–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏, –æ–±—É—á–µ–Ω–∏–µ, —Ä–∞–∑–≤–ª–µ—á–µ–Ω–∏—è, –∫–æ–Ω–∫—É—Ä—Å—ã
    `
  },
  {
    id: 'warehouse',
    name: '–°–∫–ª–∞–¥',
    description: '–ë–æ—Ç –¥–ª—è –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ —Ä–∞–∑–≥—Ä—É–∑–∫—É —Ç–æ–≤–∞—Ä–∞ –Ω–∞ —Å–∫–ª–∞–¥–µ —Å –∫–∞–ª–µ–Ω–¥–∞—Ä–µ–º',
    icon: 'Warehouse',
    gradient: 'gradient-blue',
    popular: true,
    status: 'ready',
    features: [
      '–ö–∞–ª–µ–Ω–¥–∞—Ä—å —Å –¥–æ—Å—Ç—É–ø–Ω—ã–º–∏ —Å–ª–æ—Ç–∞–º–∏',
      '–ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ —Ä–∞–∑–≥—Ä—É–∑–∫–∏',
      '–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∑–∞–Ω—è—Ç—ã—Ö —Å–ª–æ—Ç–æ–≤',
      '–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø—Ä–æ—à–µ–¥—à–∏—Ö –¥–∞—Ç',
      '–û—Ç–º–µ–Ω–∞ –±—Ä–æ–Ω–∏ –∏–∑ —á–∞—Ç–∞',
      '–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏',
      '–ò—Å—Ç–æ—Ä–∏—è –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π'
    ],
    logic: `
üìã –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã:

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–ø—É—Å–∫–∞–µ—Ç –±–æ—Ç–∞ /start
2. –ú–µ–Ω—é —Å —Ä–∞–∑–¥–µ–ª–∞–º–∏:
   - üìÖ –ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –≤—Ä–µ–º—è
   - üìã –ú–æ–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
   - ‚ÑπÔ∏è –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
3. –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏:
   - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–∞–ª–µ–Ω–¥–∞—Ä—å —Å –¥–æ—Å—Ç—É–ø–Ω—ã–º–∏ –¥–∞—Ç–∞–º–∏
   - –í—ã–±–æ—Ä –¥–∞—Ç—ã (–ø—Ä–æ—à–ª–æ–µ –≤—Ä–µ–º—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ)
   - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–≤–æ–±–æ–¥–Ω—ã–µ —Å–ª–æ—Ç—ã –≤—Ä–µ–º–µ–Ω–∏
   - –ó–∞–ø—Ä–æ—Å –¥–∞–Ω–Ω—ã—Ö: —Ç–µ–ª–µ—Ñ–æ–Ω, –∫–æ–º–ø–∞–Ω–∏—è, —Ç–∏–ø –¢–°, –≥—Ä—É–∑
   - –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
4. –ó–∞–Ω—è—Ç—ã–µ —Å–ª–æ—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫—Ä—ã–≤–∞—é—Ç—Å—è
5. –í "–ú–æ–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è":
   - –°–ø–∏—Å–æ–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö –±—Ä–æ–Ω–µ–π
   - –ö–Ω–æ–ø–∫–∞ "–û—Ç–º–µ–Ω–∏—Ç—å" –¥–ª—è –∫–∞–∂–¥–æ–π
   - –ü–æ—Å–ª–µ –æ—Ç–º–µ–Ω—ã - –≤—Ä–µ–º—è —Å–Ω–æ–≤–∞ –¥–æ—Å—Ç—É–ø–Ω–æ
6. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:
   - –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
   - –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –∑–∞ –¥–µ–Ω—å –¥–æ —Ä–∞–∑–≥—Ä—É–∑–∫–∏

‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∫–ª–∞–¥–∞:
- –†–∞–±–æ—á–∏–µ —á–∞—Å—ã: 8:00 - 18:00
- –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–ª–æ—Ç–∞: 60 –º–∏–Ω—É—Ç
- –†–∞–±–æ—á–∏–µ –¥–Ω–∏: –ü–Ω-–ü—Ç
- –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ 60 –¥–Ω–µ–π –≤–ø–µ—Ä–µ–¥

üí° –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ: –°–∫–ª–∞–¥—ã, –ª–æ–≥–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ —Ü–µ–Ω—Ç—Ä—ã, —Ç–µ—Ä–º–∏–Ω–∞–ª—ã, –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞
    `
  }
];

const TemplatesTab = () => {
  const [gptDialogOpen, setGptDialogOpen] = useState(false);
  const { toast } = useToast();

  const handleSelectTemplate = (templateId: string) => {
    if (templateId === 'gpt') {
      setGptDialogOpen(true);
    } else if (templateId === 'warehouse') {
      window.open('/warehouse-demo', '_blank');
    } else {
      toast({
        title: '–®–∞–±–ª–æ–Ω –≤—ã–±—Ä–∞–Ω',
        description: '–ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É "–ú–æ–∏ –±–æ—Ç—ã" –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –±–æ—Ç–∞ —Å —ç—Ç–∏–º —à–∞–±–ª–æ–Ω–æ–º',
      });
    }
  };

  const handleSaveGptConfig = (config: GptBotConfig) => {
    console.log('GPT Config:', config);
    toast({
      title: '–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞',
      description: `–ù–∞—Å—Ç—Ä–æ–π–∫–∏ ${config.provider === 'chatgpt' ? 'ChatGPT' : 'YandexGPT'} —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã. –°–æ–∑–¥–∞–π—Ç–µ –±–æ—Ç–∞ —Å —à–∞–±–ª–æ–Ω–æ–º GPT Bot.`,
    });
    setGptDialogOpen(false);
  };

  return (
    <div className="space-y-6 animate-fade-in">
      <div className="flex items-center justify-between">
        <div>
          <h2 className="text-3xl font-bold">–®–∞–±–ª–æ–Ω—ã –±–æ—Ç–æ–≤</h2>
          <p className="text-muted-foreground mt-1">
            –ì–æ—Ç–æ–≤—ã–µ —Ä–µ—à–µ–Ω–∏—è –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ Telegram-–±–æ—Ç–æ–≤
          </p>
        </div>
        <Badge className="bg-gradient-to-r from-purple-500 to-blue-500">
          {templates.length} —à–∞–±–ª–æ–Ω–æ–≤
        </Badge>
      </div>

      <Card className="p-4 bg-blue-500/10 border-blue-500/20">
        <div className="flex items-start gap-3">
          <Icon name="Lightbulb" size={20} className="text-blue-500 mt-0.5" />
          <div className="text-sm">
            <p className="font-medium mb-1 text-blue-600 dark:text-blue-400">
              –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —à–∞–±–ª–æ–Ω
            </p>
            <p className="text-muted-foreground">
              –í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–¥—Ö–æ–¥—è—â–∏–π —à–∞–±–ª–æ–Ω, –∏–∑—É—á–∏—Ç–µ –µ–≥–æ –ª–æ–≥–∏–∫—É —Ä–∞–±–æ—Ç—ã, –∑–∞—Ç–µ–º —Å–æ–∑–¥–∞–π—Ç–µ –±–æ—Ç–∞ –Ω–∞ –≤–∫–ª–∞–¥–∫–µ "–ú–æ–∏ –±–æ—Ç—ã" 
              –∏ —É–∫–∞–∂–∏—Ç–µ —ç—Ç–æ—Ç —à–∞–±–ª–æ–Ω. –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–º–µ–Ω–∏—Ç –≥–æ—Ç–æ–≤—É—é –ª–æ–≥–∏–∫—É.
            </p>
          </div>
        </div>
      </Card>

      <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
        {templates.map((template) => (
          <Card
            key={template.id}
            className="p-6 glass-card hover:scale-[1.02] transition-all duration-300 relative overflow-hidden"
          >
            <div className="absolute top-4 right-4 flex gap-2">
              {template.popular && (
                <Badge className="bg-gradient-to-r from-orange-500 to-red-500">
                  üî• –ü–æ–ø—É–ª—è—Ä–Ω—ã–π
                </Badge>
              )}
              {template.status === 'development' && (
                <Badge variant="outline" className="bg-yellow-500/10 border-yellow-500/30 text-yellow-600 dark:text-yellow-400">
                  üöß –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ
                </Badge>
              )}
              {template.status === 'ready' && (
                <Badge variant="outline" className="bg-green-500/10 border-green-500/30 text-green-600 dark:text-green-400">
                  ‚úÖ –ì–æ—Ç–æ–≤
                </Badge>
              )}
            </div>

            <div className="flex items-start gap-4 mb-4">
              <div className={`w-14 h-14 rounded-xl ${template.gradient} flex items-center justify-center flex-shrink-0`}>
                <Icon name={template.icon as any} size={28} className="text-white" />
              </div>
              <div className="flex-1">
                <h3 className="text-xl font-bold mb-1">{template.name}</h3>
                <p className="text-sm text-muted-foreground">{template.description}</p>
              </div>
            </div>

            <div className="mb-4">
              <p className="text-xs font-semibold text-muted-foreground uppercase mb-2">
                –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
              </p>
              <div className="flex flex-wrap gap-2">
                {template.features.map((feature, idx) => (
                  <Badge key={idx} variant="outline" className="text-xs">
                    {feature}
                  </Badge>
                ))}
              </div>
            </div>

            <div className="bg-muted/30 rounded-lg p-4 mb-4">
              <p className="text-xs font-semibold text-muted-foreground uppercase mb-2 flex items-center gap-2">
                <Icon name="Code" size={14} />
                –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã
              </p>
              <pre className="text-xs whitespace-pre-wrap font-mono text-muted-foreground">
                {template.logic.trim()}
              </pre>
            </div>

            <div className="flex gap-2">
              <Button 
                className="flex-1" 
                size="sm"
                onClick={() => handleSelectTemplate(template.id)}
                disabled={template.status === 'development'}
              >
                <Icon name="Plus" size={14} className="mr-2" />
                {template.id === 'gpt' ? '–ù–∞—Å—Ç—Ä–æ–∏—Ç—å GPT' : template.id === 'warehouse' ? '–û—Ç–∫—Ä—ã—Ç—å –¥–µ–º–æ' : '–°–æ–∑–¥–∞—Ç—å –±–æ—Ç–∞'}
              </Button>
              <Button variant="outline" size="sm" title="–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è" disabled={template.status === 'development'}>
                <Icon name="FileText" size={14} />
              </Button>
            </div>
          </Card>
        ))}
      </div>

      <Card className="p-6 glass-card bg-gradient-to-br from-purple-500/10 to-blue-500/10 border-purple-500/20">
        <div className="flex items-start gap-4">
          <div className="w-12 h-12 rounded-xl gradient-purple flex items-center justify-center flex-shrink-0">
            <Icon name="Sparkles" size={24} className="text-white" />
          </div>
          <div className="flex-1">
            <h3 className="text-lg font-bold mb-2">–ù—É–∂–µ–Ω –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π –±–æ—Ç?</h3>
            <p className="text-sm text-muted-foreground mb-4">
              –ï—Å–ª–∏ –≥–æ—Ç–æ–≤—ã–µ —à–∞–±–ª–æ–Ω—ã –Ω–µ –ø–æ–¥—Ö–æ–¥—è—Ç, –≤—ã –º–æ–∂–µ—Ç–µ —Å–æ–∑–¥–∞—Ç—å –±–æ—Ç–∞ —Å —É–Ω–∏–∫–∞–ª—å–Ω–æ–π –ª–æ–≥–∏–∫–æ–π. 
              –û–ø–∏—à–∏—Ç–µ –∂–µ–ª–∞–µ–º—É—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –≤ –ø–æ–ª–µ "–õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã" –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏.
            </p>
            <Button variant="outline" size="sm">
              <Icon name="MessageCircle" size={14} className="mr-2" />
              –°–≤—è–∑–∞—Ç—å—Å—è —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π
            </Button>
          </div>
        </div>
      </Card>

      <GptBotConfigDialog
        open={gptDialogOpen}
        onOpenChange={setGptDialogOpen}
        onSave={handleSaveGptConfig}
      />
    </div>
  );
};

export default TemplatesTab;