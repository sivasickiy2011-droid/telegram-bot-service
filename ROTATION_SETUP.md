# üîÑ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Ä–æ—Ç–∞—Ü–∏–∏ QR-–∫–æ–¥–æ–≤

## –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### 1. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ webhook –ø—Ä–∏ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –±–æ—Ç–∞
- –ü—Ä–∏ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –±–æ—Ç–∞ —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å webhook –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- –ü—Ä–∏ –¥–µ–∞–∫—Ç–∏–≤–∞—Ü–∏–∏ webhook —É–¥–∞–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è QR ‚Üí –ù–∞—Å—Ç—Ä–æ–π–∫–∞ webhook ‚Üí –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–æ—Ç–∞—Ü–∏–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –±–æ—Ç–∞
–ö–∞–∂–¥—ã–π –±–æ—Ç –∏–º–µ–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:
- `qr_rotation_value` - —á–∏—Å–ª–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 1, 6, 24)
- `qr_rotation_unit` - –µ–¥–∏–Ω–∏—Ü–∞ –∏–∑–º–µ—Ä–µ–Ω–∏—è (hours, days, weeks, years, never)

–î–ª—è –±–æ—Ç–∞ **"–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä QR + Vip"** —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ:
- –ó–Ω–∞—á–µ–Ω–∏–µ: `1`
- –ï–¥–∏–Ω–∏—Ü–∞: `days` (—Å—É—Ç–∫–∏)
- QR-–∫–æ–¥—ã –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –∫–∞–∂–¥—ã–µ 24 —á–∞—Å–∞

### 3. Backend-—Ñ—É–Ω–∫—Ü–∏–∏

#### `/backend/auto-rotate-scheduler/` 
URL: `https://functions.poehali.dev/ebf114aa-c461-46e1-b455-d28991013d12`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —Ä–æ—Ç–∞—Ü–∏–∏ –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**:
```bash
curl -X POST https://functions.poehali.dev/ebf114aa-c461-46e1-b455-d28991013d12
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç**:
- –í—ã–∑—ã–≤–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é `/backend/rotate-qr-codes/`
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –≤—Å–µ –∞–∫—Ç–∏–≤–Ω—ã–µ –±–æ—Ç—ã —Å –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω–æ–π —Ä–æ—Ç–∞—Ü–∏–µ–π
- –û–±–Ω–æ–≤–ª—è–µ—Ç QR-–∫–æ–¥—ã —Ç–æ–ª—å–∫–æ —Ç–∞–º, –≥–¥–µ –ø—Ä–æ—à—ë–ª –∏–Ω—Ç–µ—Ä–≤–∞–ª

#### `/backend/rotate-qr-codes/`
URL: `https://functions.poehali.dev/b2dc4e49-9fa9-4baa-b90b-b2d457d9ebd8`

**–ú–µ—Ç–æ–¥—ã**:
- `GET` - –ø–æ–∫–∞–∑–∞—Ç—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ —Ä–æ—Ç–∞—Ü–∏–∏ –¥–ª—è –≤—Å–µ—Ö –±–æ—Ç–æ–≤
- `POST` –±–µ–∑ `bot_id` - —Ä–æ—Ç–∞—Ü–∏—è –≤—Å–µ—Ö –±–æ—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–º –Ω—É–∂–Ω–∞
- `POST` —Å `bot_id` - –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è —Ä–æ—Ç–∞—Ü–∏—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –±–æ—Ç–∞

**–õ–æ–≥–∏–∫–∞ —Ä–æ—Ç–∞—Ü–∏–∏**:
- –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–µ QR-–∫–æ–¥—ã (code_type='free') —Å–±—Ä–∞—Å—ã–≤–∞—é—Ç—Å—è
- VIP-–∫–æ–¥—ã (code_type='vip') –ù–ï —Å–±—Ä–∞—Å—ã–≤–∞—é—Ç—Å—è
- –í—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–π —Ä–æ—Ç–∞—Ü–∏–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤ `updated_at`

#### `/backend/setup-webhook/`
URL: `https://functions.poehali.dev/5de84ef3-0564-49a9-95a1-05f3de4ba313`

**–î–µ–π—Å—Ç–≤–∏—è**:
- `setup` - –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å webhook –¥–ª—è –±–æ—Ç–∞
- `delete` - —É–¥–∞–ª–∏—Ç—å webhook
- `info` - –ø–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ webhook

### 4. –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

#### –í–∫–ª–∞–¥–∫–∞ "–ê–∫—Ç–∏–≤–∞—Ü–∏—è"
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ webhook –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ "–ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å"
- –£–¥–∞–ª–µ–Ω–∏–µ webhook –ø—Ä–∏ –¥–µ–∞–∫—Ç–∏–≤–∞—Ü–∏–∏
- –í–∏–∑—É–∞–ª—å–Ω–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞

#### –í–∫–ª–∞–¥–∫–∞ "–†–æ—Ç–∞—Ü–∏—è"
- –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –±–æ—Ç–æ–≤ —Å –∞–∫—Ç–∏–≤–Ω–æ–π —Ä–æ—Ç–∞—Ü–∏–µ–π
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç: –ø–æ—Å–ª–µ–¥–Ω—é—é —Ä–æ—Ç–∞—Ü–∏—é, —Å–ª–µ–¥—É—é—â—É—é —Ä–æ—Ç–∞—Ü–∏—é, –æ—Å—Ç–∞–≤—à–µ–µ—Å—è –≤—Ä–µ–º—è
- –ö–Ω–æ–ø–∫–∞ "–û–±–Ω–æ–≤–∏—Ç—å –≤—Å–µ" –¥–ª—è —Ä—É—á–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞
- –ö–Ω–æ–ø–∫–∞ "–û–±–Ω–æ–≤–∏—Ç—å QR-–∫–æ–¥—ã —Å–µ–π—á–∞—Å" –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –±–æ—Ç–∞
- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ cron-–∑–∞–¥–∞—á–∏
- –°—Å—ã–ª–∫–∏ –Ω–∞ —Å–µ—Ä–≤–∏—Å—ã cron-job.org –∏ EasyCron

### 5. HTML-—É—Ç–∏–ª–∏—Ç—ã

#### `setup-all-webhooks.html`
–ë—ã—Å—Ç—Ä–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ webhook –¥–ª—è –≤—Å–µ—Ö –∞–∫—Ç–∏–≤–Ω—ã—Ö –±–æ—Ç–æ–≤ –æ–¥–Ω–∏–º –∫–ª–∏–∫–æ–º.

#### `setup-rotation-cron.html`
–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Ä–æ—Ç–∞—Ü–∏–∏. –í–∫–ª—é—á–∞–µ—Ç:
- –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ URL —Ñ—É–Ω–∫—Ü–∏–∏
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–æ—Ç–∞—Ü–∏–∏
- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ cron
- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —á–∞—Å—Ç–æ—Ç–µ –∑–∞–ø—É—Å–∫–∞

## –ö–∞–∫ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é —Ä–æ—Ç–∞—Ü–∏—é

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ cron-job.org (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

1. –û—Ç–∫—Ä–æ–π—Ç–µ [cron-job.org](https://cron-job.org)
2. –°–æ–∑–¥–∞–π—Ç–µ –∞–∫–∫–∞—É–Ω—Ç
3. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—É—é –∑–∞–¥–∞—á—É:
   - **Title**: Telegram Bot QR Rotation
   - **URL**: `https://functions.poehali.dev/ebf114aa-c461-46e1-b455-d28991013d12`
   - **Method**: POST
   - **Schedule**: `0 */6 * * *` (–∫–∞–∂–¥—ã–µ 6 —á–∞—Å–æ–≤)
4. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∑–∞–¥–∞—á—É

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ EasyCron

1. –û—Ç–∫—Ä–æ–π—Ç–µ [easycron.com](https://www.easycron.com)
2. –°–æ–∑–¥–∞–π—Ç–µ –∞–∫–∫–∞—É–Ω—Ç
3. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—É—é –∑–∞–¥–∞—á—É:
   - **Name**: Bot QR Rotation
   - **URL**: `https://functions.poehali.dev/ebf114aa-c461-46e1-b455-d28991013d12`
   - **Type**: URL
   - **When**: Every 6 hours
   - **HTTP Method**: POST
4. –ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –∑–∞–¥–∞—á—É

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ß–µ—Ä–µ–∑ —Å–≤–æ–π —Å–µ—Ä–≤–µ—Ä

```bash
# –î–æ–±–∞–≤—å—Ç–µ –≤ crontab
0 */6 * * * curl -X POST https://functions.poehali.dev/ebf114aa-c461-46e1-b455-d28991013d12
```

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –ß–∞—Å—Ç–æ—Ç–∞ –∑–∞–ø—É—Å–∫–∞
- **–ö–∞–∂–¥—ã–µ 6 —á–∞—Å–æ–≤** - –æ–ø—Ç–∏–º–∞–ª—å–Ω–∞—è —á–∞—Å—Ç–æ—Ç–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
- –§—É–Ω–∫—Ü–∏—è —Å–∞–º–∞ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç, –∫–∞–∫–∏–º –±–æ—Ç–∞–º –Ω—É–∂–Ω–∞ —Ä–æ—Ç–∞—Ü–∏—è
- –ò–∑–±—ã—Ç–æ—á–Ω—ã–µ –∑–∞–ø—É—Å–∫–∏ –Ω–µ —Å–æ–∑–¥–∞—é—Ç –Ω–∞–≥—Ä—É–∑–∫—É

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- –§—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∏–Ω—Ç–µ—Ä–≤–∞–ª —Ä–æ—Ç–∞—Ü–∏–∏ –ø–µ—Ä–µ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º
- VIP-–∫–æ–¥—ã –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ —Å–±—Ä–∞—Å—ã–≤–∞—é—Ç—Å—è
- –û–±–Ω–æ–≤–ª—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—ã–µ –∏ –æ–¥–æ–±—Ä–µ–Ω–Ω—ã–µ –±–æ—Ç—ã

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –≤–∫–ª–∞–¥–∫—É "–†–æ—Ç–∞—Ü–∏—è" –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
- –ó–µ–ª—ë–Ω—ã–π –±–∞–¥–∂ = –≤—Å—ë –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é
- –ö—Ä–∞—Å–Ω—ã–π –±–∞–¥–∂ = —Ç—Ä–µ–±—É–µ—Ç—Å—è —Ä–æ—Ç–∞—Ü–∏—è (–∑–∞–ø–∞–∑–¥—ã–≤–∞–Ω–∏–µ)

## –°—Ç–∞—Ç—É—Å —Ç–µ–∫—É—â–µ–≥–æ –±–æ—Ç–∞

**–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä QR + Vip** (ID: 11):
- ‚úÖ –ê–∫—Ç–∏–≤–µ–Ω –∏ –æ–¥–æ–±—Ä–µ–Ω
- ‚úÖ QR-–∫–æ–¥—ã —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω—ã (500 –±–µ—Å–ø–ª–∞—Ç–Ω—ã—Ö + 500 VIP)
- ‚úÖ Webhook –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- ‚úÖ –†–æ—Ç–∞—Ü–∏—è: –∫–∞–∂–¥—ã–µ 1 –¥–µ–Ω—å (24 —á–∞—Å–∞)
- ‚è∞ –°–ª–µ–¥—É—é—â–∞—è —Ä–æ—Ç–∞—Ü–∏—è: —á–µ—Ä–µ–∑ ~23 —á–∞—Å–∞

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:
1. –û—Ç–∫—Ä–æ–π—Ç–µ `setup-rotation-cron.html` –∏ –Ω–∞–∂–º–∏—Ç–µ "–¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å"
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–∫–ª–∞–¥–∫—É "–†–æ—Ç–∞—Ü–∏—è" –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ cron-–∑–∞–¥–∞—á–∞ –∞–∫—Ç–∏–≤–Ω–∞ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
